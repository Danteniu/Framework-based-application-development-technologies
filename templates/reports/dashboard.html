{% extends "base.html" %}
{% block title %}Аналитика — СистемаКонтроля{% endblock %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h4 m-0">Аналитика</h1>
    <div class="text-muted">Всего дефектов: <strong>{{ total }}</strong></div>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <h2 class="h6">Дефекты по статусам</h2>
      <canvas id="chart" height="120"></canvas>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script>
    const labels = {{ status_labels|safe }};
    const values = {{ status_values|safe }};
    const ctx = document.getElementById('chart');
    new Chart(ctx, {
      type: 'bar',
      data: { labels, datasets: [{ label: 'Количество', data: values }] },
      options: { responsive: true, plugins: { legend: { display: false } } }
    });
  </script>
{% endblock %}


